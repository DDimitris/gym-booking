# Server Configuration
server.port=8080

# Database Configuration
# Prefer container network hostname by default; allow override with SPRING_DATASOURCE_URL or DB_URL env
spring.datasource.url=${DB_URL:jdbc:postgresql://postgres:5432/gym_booking}
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics

# Application timezone (use IANA zone name). Default is Europe/Athens (GMT+2 / EET)
APP_TIMEZONE=Europe/Athens

# Jackson (JSON) timezone for (de)serialization
spring.jackson.time-zone=${APP_TIMEZONE:Europe/Athens}

# Ensure Hibernate/JDBC uses the application timezone when writing/reading timestamps
spring.jpa.properties.hibernate.jdbc.time_zone=${APP_TIMEZONE:Europe/Athens}
# Security Configuration
# Use only jwk-set-uri so tokens issued with a public issuer are accepted
# while keys are fetched from the in-network Keycloak hostname.
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${OAUTH2_JWKS_URI:http://keycloak:8080/auth/realms/gym-booking/protocol/openid-connect/certs}

# Debug auth roles for write operations
logging.level.com.gym.booking.config.SecurityLoggingFilter=DEBUG
logging.level.org.springframework.security=INFO