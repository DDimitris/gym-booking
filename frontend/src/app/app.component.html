<div class="layout-shell">
  <header class="app-header">
    <div class="header-inner container">
      <div
        class="brand-group"
        (click)="kc.isAuthenticated() ? null : kcLogin()"
      >
        <div class="logo">ğŸ‹ï¸</div>
        <span class="brand-text">{{ 'common.appTitle' | translate }}</span>
      </div>
      <button
        class="menu-toggle"
        *ngIf="kc.isReady() && kc.isAuthenticated()"
        (click)="toggleMenu()"
        aria-label="Toggle menu"
      >
        â˜°
      </button>
      <nav
        class="primary-nav"
        *ngIf="kc.isReady() && kc.isAuthenticated()"
        [class.open]="mobileMenuOpen"
      >
        <a routerLink="/classes" routerLinkActive="active">{{ 'nav.calendar' | translate }}</a>
        <a *ngIf="showHistory" routerLink="/history" routerLinkActive="active"
          >{{ 'nav.history' | translate }}</a
        >
        <a routerLink="/profile" routerLinkActive="active">{{ 'nav.profile' | translate }}</a>
        <a
          *ngIf="showManagement"
          routerLink="/admin/management"
          routerLinkActive="active"
          >{{ 'nav.admin' | translate }}</a
        >
      </nav>
      <div class="user-actions" *ngIf="kc.isReady()">
        <ng-container *ngIf="kc.isAuthenticated(); else guest">
          <div class="user-chip" title="{{ roleLabel }}">
            <span class="avatar" aria-hidden="true">{{ displayInitial }}</span>
            <span class="uname">{{ displayName }}</span>
            <span class="role" *ngIf="roleLabel">{{ roleLabel }}</span>
          </div>
          <div class="lang-switcher" aria-label="Language selector">
            <button
              class="btn ghost lang"
              [class.active]="currentLang === 'en'"
              (click)="setLang('en')"
            >
              EN
            </button>
            <span class="lang-separator">|</span>
            <button
              class="btn ghost lang"
              [class.active]="currentLang === 'el'"
              (click)="setLang('el')"
            >
              Î•Î›
            </button>
          </div>
          <button class="btn ghost" (click)="logout()">{{ 'nav.logout' | translate }}</button>
          <button
            class="btn ghost toggle"
            (click)="toggleTheme()"
            aria-label="Toggle theme"
          >
            ğŸŒ“
          </button>
        </ng-container>
        <ng-template #guest>
          <div class="lang-switcher" aria-label="Language selector">
            <button
              class="btn ghost lang"
              [class.active]="currentLang === 'en'"
              (click)="setLang('en')"
            >
              EN
            </button>
            <span class="lang-separator">|</span>
            <button
              class="btn ghost lang"
              [class.active]="currentLang === 'el'"
              (click)="setLang('el')"
            >
              Î•Î›
            </button>
          </div>
          <button class="btn primary" (click)="kcLogin()">{{ 'header.quickLogin' | translate }}</button>
          <button
            class="btn ghost toggle"
            (click)="toggleTheme()"
            aria-label="Toggle theme"
          >
            ğŸŒ“
          </button>
        </ng-template>
      </div>
    </div>
  </header>
  <main class="app-main container">
    <router-outlet></router-outlet>
  </main>
  <footer class="app-footer container">
    <span
      >&copy; {{ currentYear }} Gym Booking â€¢
      <a href="https://example.com" target="_blank" rel="noopener"
        >Docs</a
      ></span
    >
  </footer>
</div>
